---
# This playbook deploys the whole application stack in this site.
- name: Trigguer list of roles sent from Service Dialog using extra_var roles
  hosts: all
  environment:
    ansible_host_key_checking: false
  remote_user: root
  pre_tasks:
    - name: logging manageiq object
      debug: var=manageiq
      when: manageiq is defined

  roles:
    - { role: apache, when: '"apache" in rolescfme.split(",")' }
    - { role: mysql, when: '"mysql" in rolescfme.split(",")' }
    - { role: php, when: '"php" in rolescfme.split(",")' }
    - { role: jdk, when: '"jdk" in rolescfme.split(",")' }
    - { role: tomcat, when: '"tomcat" in rolescfme.split(",")' }
    - { role: managed, when: '"managed" in rolescfme.split(",")' }
    - { role: unmanaged, when: '"unmanaged" in rolescfme.split(",")' }
